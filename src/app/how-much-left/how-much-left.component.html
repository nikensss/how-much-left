<div class="settings">
  <button
    nbButton
    outline
    status="success"
    type="button"
    (click)="calculate(amountLeft.value)"
  >
    Calculate
  </button>
  <nb-toggle
    labelPosition="right"
    (change)="calculate(amountLeft.value)"
    [(checked)]="doNotCountToday"
  >
    Do not count today
  </nb-toggle>
</div>
<input
  #amountLeft
  type="number"
  status="info"
  nbInput
  fullWidth
  (keyup)="calculate(amountLeft.value)"
  (keyup.enter)="save()"
/>
<div *ngIf="totalAmountLeft > 0" class="text-center">
  <p>Next pay day is: {{ nextPayDay.toDateString() }}</p>
  <p>({{ differenceInDays() }} days remaining)</p>
  <p>You can spend {{ averageToSpendPerDay.toFixed(2) }}&nbsp;&euro; per day</p>
</div>

<div *ngIf="auth.authState | async as user" class="flex">
  <p class="logged-user">
    Logged in as
    {{
      user.displayName ? user.displayName + ' (' + user.email + ')' : user.email
    }}
  </p>
  <button
    class="save-button"
    [disabled]="!canSave"
    nbButton
    status="success"
    (click)="save()"
  >
    {{ saveButtonTitle }}
  </button>
  <button
    class="pop-button"
    [disabled]="!canPop"
    nbButton
    status="danger"
    (click)="pop()"
  >
    {{ popButtonTitle }}
  </button>
  <app-plot></app-plot>
</div>
